<div class="form-container">
  <h2>Antecedente Personal</h2>

  <form #antPersForm="ngForm">
    <!-- Dos columnas: personales y familiares -->
    <div class="form-row two-cols">
      <div class="form-group">
        <label for="antPersonales">Antecedentes Personales *</label>
        <textarea id="antPersonales"
                  name="antecedentesPersonales"
                  [(ngModel)]="antecedentePersonal.antecedentesPersonales"
                  required
                  rows="8"
                  placeholder="Describa antecedentes personales relevantes"></textarea>
      </div>

      <div class="form-group">
        <label for="antFamiliares">Antecedentes Familiares *</label>
        <textarea id="antFamiliares"
                  name="antecedentesFamiliares"
                  [(ngModel)]="antecedentePersonal.antecedentesFamiliares"
                  required
                  rows="8"
                  placeholder="Describa antecedentes familiares relevantes"></textarea>
      </div>
    </div>

    <!-- Campo opcional extra: Gineco-Obstétricos (una columna completa) -->
    <div class="form-row">
      <div class="form-group full-width">
        <label for="gineco">Gineco-Obstétricos</label>
        <textarea id="gineco"
                  name="ginecoObstetricos"
                  [(ngModel)]="antecedentePersonal.ginecoObstetricos"
                  rows="5"
                  placeholder="Opcional"></textarea>
      </div>
    </div>

    <!-- Datos numéricos -->
    <div class="form-row">
      <div class="form-group small-input">
        <label>Gestas</label>
        <input type="number" [(ngModel)]="antecedentePersonal.gestas" name="gestas">
      </div>
      <div class="form-group small-input">
        <label>Partos</label>
        <input type="number" [(ngModel)]="antecedentePersonal.partos" name="partos">
      </div>
      <div class="form-group small-input">
        <label>Abortos</label>
        <input type="number" [(ngModel)]="antecedentePersonal.abortos" name="abortos">
      </div>
      <div class="form-group small-input">
        <label>Cesáreas</label>
        <input type="number" [(ngModel)]="antecedentePersonal.cesareas" name="cesareas">
      </div>
      <div class="form-group small-input">
        <label>Vivos</label>
        <input type="number" [(ngModel)]="antecedentePersonal.vivos" name="vivos">
      </div>
      <div class="form-group small-input">
        <label>Mortinatos</label>
        <input type="number" [(ngModel)]="antecedentePersonal.mortinatos" name="mortinatos">
      </div>
    </div>

    <!-- Acciones -->
    <div class="form-row form-actions">
      <button type="button"
              class="btn-primary"
              (click)="guardarYContinuar()"
              [disabled]="!antPersForm.form.valid">
        Siguiente
      </button>

      <button type="button" class="btn-outline" (click)="atras()">
        Atrás
      </button>
    </div>

    <div class="form-row form-cancel">
      <button type="button" class="btn-cancel" (click)="abrirPopupCancelar()">
        Cancelar
      </button>
    </div>
  </form>
</div>

<!-- POPUP de confirmación -->
<app-popup
  *ngIf="isPopupOpen"
  [message]="'¿Deseas abandonar el registro?'"
  [confirmText]="'SI'"
  [cancelText]="'NO'"
  (onConfirm)="confirmarSalida()
"
  (onCancel)="cerrarPopup()">
</app-popup>
